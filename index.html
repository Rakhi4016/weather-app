<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Weather App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #f4f4f9;
      transition: background 0.5s ease;
    }

    .container {
      background: rgba(255, 255, 255, 0.9);
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      text-align: center;
      width: 320px;
      position: relative;
      overflow: hidden;
    }

    input {
      width: calc(100% - 24px);
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      outline: none;
    }

    button {
      background-color: #4caf50;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s ease;
    }

    button:hover {
      background-color: #45a049;
    }

    h2 {
      margin: 10px 0;
    }

    .weather-info {
      margin-top: 20px;
    }

    .icon {
      width: 100px;
      height: 100px;
    }

    /* Sparkle effect for sunny */
    @keyframes sparkle {
      0% { opacity: 0.5; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1); }
      100% { opacity: 0.5; transform: scale(0.8); }
    }

    .sparkle {
      position: absolute;
      background-color: yellow;
      width: 5px;
      height: 5px;
      border-radius: 50%;
      animation: sparkle 1.5s infinite ease-in-out;
    }

    /* Cloudy effect */
    .cloud {
      position: absolute;
      background-color: #ddd;
      width: 50px;
      height: 30px;
      border-radius: 50%;
      top: 20px;
      left: 20px;
      opacity: 0.7;
    }

    /* Rain effect */
    @keyframes rain {
      0% { transform: translateY(0); }
      100% { transform: translateY(100px); }
    }

    .raindrop {
      position: absolute;
      background-color: #3498db;
      width: 2px;
      height: 10px;
      top: -20px;
      left: 50%;
      animation: rain 1s infinite linear;
    }

    /* Wind effect */
    @keyframes wind {
      0% { transform: translateX(-10px); }
      100% { transform: translateX(10px); }
    }

    .wind {
      position: absolute;
      background-color: #bbb;
      width: 40px;
      height: 3px;
      top: 50px;
      left: 0;
      animation: wind 0.5s infinite alternate ease-in-out;
    }
  </style>
</head>
<body>

<div class="container">
  <input type="text" id="city" placeholder="Enter city..." />
  <button onclick="getWeather()">Get Weather</button>
  
  <div class="weather-info">
    <h2 id="location"></h2>
    <img id="icon" class="icon" src="" alt="" />
    <p id="description"></p>
    <p id="temperature"></p>
  </div>
</div>

<script>
  const apiKey = '1fa939259d52416184d174202250803';

  async function getWeather() {
    const city = document.getElementById('city').value;
    if (!city) return alert('Please enter a city');

    const url = `https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${city}&aqi=no`;

    try {
      const res = await fetch(url);
      if (!res.ok) throw new Error('City not found');
      const data = await res.json();

      document.getElementById('location').innerText = `${data.location.name}, ${data.location.country}`;
      document.getElementById('description').innerText = data.current.condition.text;
      document.getElementById('temperature').innerText = `${data.current.temp_c}Â°C`;
      document.getElementById('icon').src = `https:${data.current.condition.icon}`;
      
      clearEffects();
      handleWeatherEffects(data.current.condition.text.toLowerCase());
    } catch (error) {
      alert(error.message);
    }
  }

  function handleWeatherEffects(condition) {
    if (condition.includes('sunny')) {
      createSparkles();
      document.body.style.background = '#ffeb3b';
    } else if (condition.includes('cloudy')) {
      createClouds();
      document.body.style.background = '#b0bec5';
    } else if (condition.includes('rain')) {
      createRain();
      document.body.style.background = '#90a4ae';
    } else if (condition.includes('wind')) {
      createWind();
      document.body.style.background = '#eceff1';
    }
  }

  function createSparkles() {
    for (let i = 0; i < 10; i++) {
      const sparkle = document.createElement('div');
      sparkle.classList.add('sparkle');
      sparkle.style.top = `${Math.random() * 100}px`;
      sparkle.style.left = `${Math.random() * 100}px`;
      document.body.appendChild(sparkle);
    }
  }

  function createClouds() {
    for (let i = 0; i < 3; i++) {
      const cloud = document.createElement('div');
      cloud.classList.add('cloud');
      cloud.style.left = `${i * 70}px`;
      document.body.appendChild(cloud);
    }
  }

  function createRain() {
    for (let i = 0; i < 20; i++) {
      const raindrop = document.createElement('div');
      raindrop.classList.add('raindrop');
      raindrop.style.left = `${Math.random() * 100}vw`;
      document.body.appendChild(raindrop);
    }
  }

  function createWind() {
    for (let i = 0; i < 5; i++) {
      const wind = document.createElement('div');
      wind.classList.add('wind');
      wind.style.top = `${i * 20 + 50}px`;
      document.body.appendChild(wind);
    }
  }

  function clearEffects() {
    document.querySelectorAll('.sparkle, .cloud, .raindrop, .wind').forEach(el => el.remove());
  }
</script>

</body>
</html>
